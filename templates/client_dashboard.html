{% extends "base.html" %}
{% block title %}委託人控制台{% endblock %}
{% block content %}
<div class="card">
    <h2>我的專案</h2>
    <a href="/client/project/new" class="btn">建立新專案</a>
    <a href="/client/completed" class="btn">查看已完成專案</a>
</div>

{% if projects %}
    {% for project in projects %}
    <div class="card">
        <h3>{{ project.title }}</h3>
        <p>{{ project.description }}</p>
        <p><strong>預算:</strong> ${{ project.budget }}</p>
        <p><strong>狀態:</strong> <span class="status status-{{ project.status }}">
            {% if project.status == 'open' %}待接案
            {% elif project.status == 'assigned' %}進行中
            {% elif project.status == 'rejected' %}已退件
            {% endif %}
        </span></p>
        <p><strong>更新時間:</strong> {{ project.updated_at }}</p>
        {% if project.contractor_name %}
        <p><strong>接案人:</strong> {{ project.contractor_name }}</p>
        {% endif %}
        
        <div style="margin-top: 1rem;">
            {% if project.status == 'open' %}
            <a href="/client/project/{{ project.id }}/edit" class="btn">修改</a>
            <a href="/client/project/{{ project.id }}/bids" class="btn">查看投標</a>
            {% elif (project.status == 'assigned' or project.status == 'rejected') %}
            <a href="/client/project/{{ project.id }}/deliverable" class="btn">查看結案檔案</a>
            {% endif %}
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="card">
        <p>目前沒有專案</p>
    </div>
{% endif %}
{% endblock %}